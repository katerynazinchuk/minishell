 4_Minishell git:(error-handler) âœ— make valgrind
valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes -s --suppressions=readline.supp ./minishell
==102962== Memcheck, a memory error detector
==102962== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==102962== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==102962== Command: ./minishell
==102962== 
tchernia:~$ echo $USER
AST_COMMAND: [echo] [tchernia] 
tchernia
tchernia:~$ ls
AST_COMMAND: [ls] 
1.txt  doc  include  libft  Makefile  minishell  minishell_tester  obj  readline_lib.supp  readline.supp  README.md  src  test_cases
tchernia:~$ ls | echo ${{bkbo}}
minishel: bad substitution
==102962== Invalid read of size 8
==102962==    at 0x404A10: free_ast (free_parser.c:56)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e88 is 24 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid read of size 8
==102962==    at 0x404A1D: free_ast (free_parser.c:57)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e90 is 32 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid read of size 8
==102962==    at 0x404A31: free_ast (free_parser.c:59)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e78 is 8 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid read of size 8
==102962==    at 0x404A45: free_ast (free_parser.c:61)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e78 is 8 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid read of size 8
==102962==    at 0x404A4D: free_ast (free_parser.c:61)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97f80 is 0 bytes inside a block of size 16 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A87: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x40404A: tokens_to_argv (parser.c:116)
==102962==    by 0x403F61: parse_command (parser.c:48)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid read of size 8
==102962==    at 0x404A5C: free_ast (free_parser.c:63)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e78 is 8 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid read of size 8
==102962==    at 0x404A64: free_ast (free_parser.c:63)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97f80 is 0 bytes inside a block of size 16 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A87: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x40404A: tokens_to_argv (parser.c:116)
==102962==    by 0x403F61: parse_command (parser.c:48)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid free() / delete / delete[] / realloc()
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A6C: free_ast (free_parser.c:63)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97fd0 is 0 bytes inside a block of size 3 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A6C: free_ast (free_parser.c:63)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x4068E4: ft_strdup (ft_strdup.c:20)
==102962==    by 0x4040C8: tokens_to_argv (parser.c:123)
==102962==    by 0x403F61: parse_command (parser.c:48)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid read of size 8
==102962==    at 0x404A7F: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e78 is 8 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid free() / delete / delete[] / realloc()
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A87: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97f80 is 0 bytes inside a block of size 16 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A87: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x40404A: tokens_to_argv (parser.c:116)
==102962==    by 0x403F61: parse_command (parser.c:48)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid read of size 8
==102962==    at 0x404A8C: free_ast (free_parser.c:68)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e80 is 16 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== Invalid free() / delete / delete[] / realloc()
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e70 is 0 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
tchernia:~$ 
exit
==102962== 
==102962== HEAP SUMMARY:
==102962==     in use at exit: 208,269 bytes in 228 blocks
==102962==   total heap usage: 916 allocs, 691 frees, 239,596 bytes allocated
==102962== 
==102962== LEAK SUMMARY:
==102962==    definitely lost: 0 bytes in 0 blocks
==102962==    indirectly lost: 0 bytes in 0 blocks
==102962==      possibly lost: 0 bytes in 0 blocks
==102962==    still reachable: 0 bytes in 0 blocks
==102962==         suppressed: 208,269 bytes in 228 blocks
==102962== 
==102962== ERROR SUMMARY: 14 errors from 12 contexts (suppressed: 0 from 0)
==102962== 
==102962== 1 errors in context 1 of 12:
==102962== Invalid free() / delete / delete[] / realloc()
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e70 is 0 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 2 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A8C: free_ast (free_parser.c:68)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e80 is 16 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 3 of 12:
==102962== Invalid free() / delete / delete[] / realloc()
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A87: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97f80 is 0 bytes inside a block of size 16 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A87: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x40404A: tokens_to_argv (parser.c:116)
==102962==    by 0x403F61: parse_command (parser.c:48)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 4 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A7F: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e78 is 8 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 5 of 12:
==102962== Invalid free() / delete / delete[] / realloc()
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A6C: free_ast (free_parser.c:63)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97fd0 is 0 bytes inside a block of size 3 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A6C: free_ast (free_parser.c:63)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x4068E4: ft_strdup (ft_strdup.c:20)
==102962==    by 0x4040C8: tokens_to_argv (parser.c:123)
==102962==    by 0x403F61: parse_command (parser.c:48)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 6 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A64: free_ast (free_parser.c:63)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97f80 is 0 bytes inside a block of size 16 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A87: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x40404A: tokens_to_argv (parser.c:116)
==102962==    by 0x403F61: parse_command (parser.c:48)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 7 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A5C: free_ast (free_parser.c:63)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e78 is 8 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 8 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A31: free_ast (free_parser.c:59)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e78 is 8 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 9 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A1D: free_ast (free_parser.c:57)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e90 is 32 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 1 errors in context 10 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A10: free_ast (free_parser.c:56)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e88 is 24 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 2 errors in context 11 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A4D: free_ast (free_parser.c:61)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97f80 is 0 bytes inside a block of size 16 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404A87: free_ast (free_parser.c:66)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x40404A: tokens_to_argv (parser.c:116)
==102962==    by 0x403F61: parse_command (parser.c:48)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
==102962== 
==102962== 2 errors in context 12 of 12:
==102962== Invalid read of size 8
==102962==    at 0x404A45: free_ast (free_parser.c:61)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Address 0x4b97e78 is 8 bytes inside a block of size 40 free'd
==102962==    at 0x484B27F: free (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x404AAC: free_ast (free_parser.c:71)
==102962==    by 0x406371: shell_loop (rewrite_main.c:76)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962==  Block was alloc'd at
==102962==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==102962==    by 0x403E88: create_ast_node (parser.c:19)
==102962==    by 0x403EF5: parse_command (parser.c:36)
==102962==    by 0x4042AE: parse_pipe (parser.c:100)
==102962==    by 0x406476: parser (rewrite_main.c:97)
==102962==    by 0x4063A4: process_line (rewrite_main.c:82)
==102962==    by 0x406343: shell_loop (rewrite_main.c:73)
==102962==    by 0x40627C: run_shell (rewrite_main.c:54)
==102962==    by 0x406229: main (rewrite_main.c:40)
==102962== 
--102962-- 
--102962-- used_suppression:     62 <Readline> readline.supp:2 suppressed: 204,167 bytes in 221 blocks
--102962-- used_suppression:      4 <Readline/AddHistory> readline.supp:10 suppressed: 4,102 bytes in 7 blocks
==102962== 
==102962== ERROR SUMMARY: 14 errors from 12 contexts (suppressed: 0 from 0)





________________________________________________________________________________________________________________
________________________________________________________________________________________________________________



==29671== 1 bytes in 1 blocks are definitely lost in loss record 2 of 71
==29671==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==29671==    by 0x48AEBAC: xmalloc (in /usr/lib/x86_64-linux-gnu/libreadline.so.8.1)
==29671==    by 0x488C694: readline_internal_teardown (in /usr/lib/x86_64-linux-gnu/libreadline.so.8.1)
==29671==    by 0x4896D2A: readline (in /usr/lib/x86_64-linux-gnu/libreadline.so.8.1)
==29671==    by 0x404BD5: write_heredoc_lines (heredoc.c:52)
==29671==    by 0x404DA5: expand_heredoc (heredoc.c:101)
==29671==    by 0x404F1E: heredoc_foreach_redir (utils.c:21)
==29671==    by 0x404EA4: heredoc_foreach_ast (utils.c:32)
==29671==    by 0x404ED3: heredoc_foreach_ast (utils.c:36)
==29671==    by 0x404E46: heredoc (heredoc.c:118)
==29671==    by 0x406407: process_line (rewrite_main.c:85)
==29671==    by 0x406373: shell_loop (rewrite_main.c:73)
==29671== 
==29671== 15 bytes in 1 blocks are definitely lost in loss record 11 of 71
==29671==    at 0x4848899: malloc (in /usr/libexec/valgrind/vgpreload_memcheck-amd64-linux.so)
==29671==    by 0x406AC7: ft_strjoin (ft_strjoin.c:24)
==29671==    by 0x404B4E: create_heredoc_filename (heredoc.c:33)
==29671==    by 0x404D34: expand_heredoc (heredoc.c:90)
==29671==    by 0x404F1E: heredoc_foreach_redir (utils.c:21)
==29671==    by 0x404EA4: heredoc_foreach_ast (utils.c:32)
==29671==    by 0x404ED3: heredoc_foreach_ast (utils.c:36)
==29671==    by 0x404E46: heredoc (heredoc.c:118)
==29671==    by 0x406407: process_line (rewrite_main.c:85)
==29671==    by 0x406373: shell_loop (rewrite_main.c:73)
==29671==    by 0x4062AC: run_shell (rewrite_main.c:54)
==29671==    by 0x406259: main (rewrite_main.c:40)
